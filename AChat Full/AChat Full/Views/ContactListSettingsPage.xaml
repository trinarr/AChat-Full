<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="AChatFull.Views.ContactListSettingsPage"
             x:Name="ThisPage"
             Title="Contact List">

    <!-- Хедер -->
    <NavigationPage.TitleView>
        <ContentView Padding="0">
            <Grid Padding="8" ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto">
                <ImageButton Grid.Column="0"
                     Source="arrow_back.png"
                     BackgroundColor="Transparent"
                     HeightRequest="24" WidthRequest="24"
                     Margin="0,0,8,0"
                     Clicked="OnBackClicked" />
                <Label Grid.Column="1"
               Text="Contact List"
               FontAttributes="Bold"
               FontSize="18"
               HorizontalTextAlignment="Center"
               VerticalTextAlignment="Center"
               TextColor="#fff" />
                <BoxView Grid.Column="2" WidthRequest="24" HeightRequest="1" Opacity="0"/>
            </Grid>
        </ContentView>
    </NavigationPage.TitleView>

    <!-- Стили как в ProfilePage -->
    <ContentPage.Resources>
        <ResourceDictionary>
            <Style x:Key="RowStyle" TargetType="Grid">
                <Setter Property="Padding" Value="16,12"/>
                <Setter Property="ColumnDefinitions">
                    <Setter.Value>
                        <ColumnDefinitionCollection>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </ColumnDefinitionCollection>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style x:Key="RowIcon" TargetType="Image">
                <Setter Property="HeightRequest" Value="22"/>
                <Setter Property="WidthRequest" Value="22"/>
                <Setter Property="Margin" Value="0,0,12,0"/>
            </Style>
            <Style x:Key="RowTitle" TargetType="Label">
                <Setter Property="FontSize" Value="16"/>
                <Setter Property="TextColor" Value="{StaticResource TextColor}"/>
            </Style>
            <Style x:Key="RowDivider" TargetType="BoxView">
                <Setter Property="Color" Value="#1A000000"/>
                <Setter Property="HeightRequest" Value="1"/>
                <Setter Property="HorizontalOptions" Value="FillAndExpand"/>
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>

    <ScrollView>
        <StackLayout Spacing="12"
                 BackgroundColor="{DynamicResource Color.Background}">

            <!-- ===== СЕКЦИЯ 1: List Columns ===== -->
            <Label Text="Contact List Columns"
             Margin="16,12,16,0"
             FontSize="12"
             FontAttributes="Bold"
             TextColor="{DynamicResource Color.TextSecondary}" />

            <Frame Margin="16,4,16,0"
             Padding="0"
             CornerRadius="16"
             HasShadow="False"
             BackgroundColor="{DynamicResource Color.Surface}">
                <StackLayout Spacing="0">

                    <!-- One column -->
                    <Grid Style="{StaticResource RowStyle}">
                        <Label Grid.Column="1"
                   Text="One column"
                   Style="{StaticResource RowTitle}" />

                        <!-- кастомный radio справа -->
                        <Grid Grid.Column="2" WidthRequest="22" HeightRequest="22"
                  HorizontalOptions="End" VerticalOptions="Center">

                            <!-- выбранное -->
                            <Grid IsVisible="False">
                                <Frame WidthRequest="22" HeightRequest="22" CornerRadius="11"
                       Padding="0" HasShadow="False" BackgroundColor="#000000"/>
                                <Frame WidthRequest="18" HeightRequest="18" CornerRadius="9"
                       Padding="0" HasShadow="False" BackgroundColor="White"
                       HorizontalOptions="Center" VerticalOptions="Center"/>
                                <Frame WidthRequest="10" HeightRequest="10" CornerRadius="5"
                       Padding="0" HasShadow="False" BackgroundColor="#000000"
                       HorizontalOptions="Center" VerticalOptions="Center"/>
                                <Grid.Triggers>
                                    <DataTrigger TargetType="Grid"
                               Binding="{Binding Source={x:Reference ThisPage}, Path=SelectedColumns}"
                               Value="1">
                                        <Setter Property="IsVisible" Value="True"/>
                                    </DataTrigger>
                                </Grid.Triggers>
                            </Grid>

                            <!-- невыбранное -->
                            <Grid IsVisible="True">
                                <Frame WidthRequest="22" HeightRequest="22" CornerRadius="11"
                       Padding="0" HasShadow="False" BackgroundColor="#000000"/>
                                <Frame WidthRequest="18" HeightRequest="18" CornerRadius="9"
                       Padding="0" HasShadow="False" BackgroundColor="White"
                       HorizontalOptions="Center" VerticalOptions="Center"/>
                                <Grid.Triggers>
                                    <DataTrigger TargetType="Grid"
                               Binding="{Binding Source={x:Reference ThisPage}, Path=SelectedColumns}"
                               Value="1">
                                        <Setter Property="IsVisible" Value="False"/>
                                    </DataTrigger>
                                </Grid.Triggers>
                            </Grid>
                        </Grid>

                        <!-- тап по всей строке -->
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnOneColumnTapped"/>
                        </Grid.GestureRecognizers>
                    </Grid>

                    <!-- Two columns -->
                    <Grid Style="{StaticResource RowStyle}">
                        <Label Grid.Column="1"
                   Text="Two columns"
                   Style="{StaticResource RowTitle}" />

                        <!-- кастомный radio справа -->
                        <Grid Grid.Column="2" WidthRequest="22" HeightRequest="22"
                  HorizontalOptions="End" VerticalOptions="Center">

                            <!-- выбранное -->
                            <Grid IsVisible="False">
                                <Frame WidthRequest="22" HeightRequest="22" CornerRadius="11"
                       Padding="0" HasShadow="False" BackgroundColor="#000000"/>
                                <Frame WidthRequest="18" HeightRequest="18" CornerRadius="9"
                       Padding="0" HasShadow="False" BackgroundColor="White"
                       HorizontalOptions="Center" VerticalOptions="Center"/>
                                <Frame WidthRequest="10" HeightRequest="10" CornerRadius="5"
                       Padding="0" HasShadow="False" BackgroundColor="#000000"
                       HorizontalOptions="Center" VerticalOptions="Center"/>
                                <Grid.Triggers>
                                    <DataTrigger TargetType="Grid"
                               Binding="{Binding Source={x:Reference ThisPage}, Path=SelectedColumns}"
                               Value="2">
                                        <Setter Property="IsVisible" Value="True"/>
                                    </DataTrigger>
                                </Grid.Triggers>
                            </Grid>

                            <!-- невыбранное -->
                            <Grid IsVisible="True">
                                <Frame WidthRequest="22" HeightRequest="22" CornerRadius="11"
                       Padding="0" HasShadow="False" BackgroundColor="#000000"/>
                                <Frame WidthRequest="18" HeightRequest="18" CornerRadius="9"
                       Padding="0" HasShadow="False" BackgroundColor="White"
                       HorizontalOptions="Center" VerticalOptions="Center"/>
                                <Grid.Triggers>
                                    <DataTrigger TargetType="Grid"
                               Binding="{Binding Source={x:Reference ThisPage}, Path=SelectedColumns}"
                               Value="2">
                                        <Setter Property="IsVisible" Value="False"/>
                                    </DataTrigger>
                                </Grid.Triggers>
                            </Grid>
                        </Grid>

                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnTwoColumnsTapped"/>
                        </Grid.GestureRecognizers>
                    </Grid>

                </StackLayout>
            </Frame>

            <!-- ===== СЕКЦИЯ 2: Group Headers ===== -->
            <Label Text="Group Headers"
             Margin="16,16,16,0"
             FontSize="12"
             FontAttributes="Bold"
             TextColor="{DynamicResource Color.TextSecondary}" />

            <Frame Margin="16,4,16,16"
             Padding="0"
             CornerRadius="16"
             HasShadow="False"
             BackgroundColor="{DynamicResource Color.Surface}">
                <Grid Style="{StaticResource RowStyle}">
                    <Label Grid.Column="1"
                 Text="Show groups"
                 Style="{StaticResource RowTitle}" />
                    <Switch x:Name="ShowGroupsSwitch"
                  Grid.Column="2"
                  VerticalOptions="Center"
                  Toggled="OnShowGroupsToggled"/>
                    <Grid.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnShowGroupsTapped"/>
                    </Grid.GestureRecognizers>
                </Grid>
            </Frame>

        </StackLayout>
    </ScrollView>
</ContentPage>
